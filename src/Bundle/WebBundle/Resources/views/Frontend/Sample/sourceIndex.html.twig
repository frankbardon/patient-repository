{# This file is part of the Accard package. #}

{# (c) University of Pennsylvania #}

{# For the full copyright and license information, please view the LICENSE #}
{# file that was distributed with this source code. #}

{% extends 'AccardWebBundle:Frontend:layout.html.twig' %}

{% from 'AccardWebBundle:Common/Macros:buttons.html.twig' import create, design %}
{% from 'AccardWebBundle:Common/Macros:misc.html.twig' import pagination, page_title %}
{% from 'AccardWebBundle:Frontend/Sample:macros.html.twig' import list_sources %}

{% set settings = accard_settings('sample') %}
{% set designBtn = null %}
{% if is_granted('ROLE_ADMIN') %}
    {% set designBtn = design(path('accard_backend_sample_design'), 'accard.sample.action.design'|trans) %}
{% endif %}
{% set source = app.request.get('_route') == 'accard_frontend_sample_source_collection_index' ? 'collection' : 'derivation' %}

{% if source == 'collection' %}
    {% set createBtn = create(path('accard_frontend_sample_source_collection_create'), 'accard.sample_source.action.collection.create'|trans) %}
{% else %}
    {% set createBtn = create(path('accard_frontend_sample_source_derivation_create'), 'accard.sample_source.action.derivation.create'|trans) %}
{% endif %}

{% block content %}
    {% block sample_title %}
        {{ page_title('accard.sample_source.title.' ~ source ~ '.index'|trans, [createBtn, designBtn]) }}
    {% endblock %}

    {% block sample_tabs  %}
        {% include 'AccardWebBundle:Frontend/Sample:tabs.html.twig' %}
    {% endblock %}

    {% block sample_content %}
        {{ list_sources(sample_sources) }}
        {{ pagination(sample_sources) }}
    {% endblock %}
{% endblock %}