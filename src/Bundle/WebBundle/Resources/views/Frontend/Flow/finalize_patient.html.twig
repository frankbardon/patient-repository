{# This file is part of the Accard package. #}

{# (c) University of Pennsylvania #}

{# For the full copyright and license information, please view the LICENSE #}
{# file that was distributed with this source code. #}

{% extends 'AccardWebBundle:Frontend/Flow:layout.html.twig' %}

{% from 'AccardWebBundle:Common/Macros:misc.html.twig' import page_title %}

{% block flow_content %}

    {{ page_title('accard.flow.finalize_patient.title'|trans) }}

    {% if patient is defined %}
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Patient</h3>
        </div>
        <table class="table table-striped">
            <tbody>
                <tr>
                    <th>MRN</th>
                    <td>{{ patient.mrn }}</td>
                </tr>
                <tr>
                    <th>
                        Name
                    </th>
                    <td>
                        {{patient.firstName}} {{patient.lastName}}
                    </td>
                </tr>
                <tr>
                    <th>
                        Date of Birth
                    </th>
                    <td>
                        {{patient.dateOfBirth|date('m-d-Y')}}
                    </td>
                </tr>
                <tr>
                    <th>
                        Gender
                    </th>
                    <td>
                        {{patient.gender}}
                    </td>
                </tr>
                <tr>
                    <th>
                        Race
                    </th>
                    <td>   
                        {{patient.race}}
                    </td>
                </tr>
            </tbody>
        </table>
        </div>

    {% endif %}

    {% if diagnosis is defined %}
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">
                Diagnosis
            </h3>
        </div>
            {% include 'AccardWebBundle:Frontend/Diagnosis:detail.html.twig' %}
    </div>
    <hr>
    {% endif %}

    {% if create_pre_existing_conditions.diagnoses|length %}
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Pre-existing Conditions</h3>
        </div>
        <div class="panel-body">
        {% for diagnosis in create_pre_existing_conditions.diagnoses %}
        <div class="col-md-2">
            Condition #{{loop.index}}
        </div>
        <div class="col-md-10">
        <table class="table table-striped">
            <tbody>
                <tr>
                    <th>
                        Code
                    </th>
                    <td>
                        {{diagnosis.code.code}}
                    </td>
                </tr>
                <tr>
                    <th>
                        Description
                    </th>
                    <td>
                        {{diagnosis.code.description}}
                    </td>
                </tr>
                <tr>
                    <th>
                        Start date
                    </th>
                    <td>
                        {{diagnosis.startDate|date('m-d-Y')}}
                    </td>
                </tr>
                <tr>
                    <th>
                        End date
                    </th>
                    <td>
                        {{diagnosis.endDate|date('m-d-Y')}}
                    </td>
                </tr>
            </tbody>
        </table>  
        </div>  
        {% endfor %}
        </div>
    </div>
    <hr>
    {% endif %}

{% endblock %}

